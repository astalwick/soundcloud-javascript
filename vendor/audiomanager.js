(function(e,t){if(typeof module!=="undefined"&&module.exports){module.exports=t()}else{e.AudioManager=t()}})(this,function(){var e,t,n;(function(r){function d(e,t){return h.call(e,t)}function v(e,t){var n,r,i,s,o,u,a,f,c,h,p=t&&t.split("/"),d=l.map,v=d&&d["*"]||{};if(e&&e.charAt(0)==="."){if(t){p=p.slice(0,p.length-1);e=p.concat(e.split("/"));for(f=0;f<e.length;f+=1){h=e[f];if(h==="."){e.splice(f,1);f-=1}else if(h===".."){if(f===1&&(e[2]===".."||e[0]==="..")){break}else if(f>0){e.splice(f-1,2);f-=2}}}e=e.join("/")}else if(e.indexOf("./")===0){e=e.substring(2)}}if((p||v)&&d){n=e.split("/");for(f=n.length;f>0;f-=1){r=n.slice(0,f).join("/");if(p){for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i;o=f;break}}}}if(s){break}if(!u&&v&&v[r]){u=v[r];a=f}}if(!s&&u){s=u;o=a}if(s){n.splice(0,o,s);e=n.join("/")}}return e}function m(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function g(e){return function(t){return v(t,e)}}function y(e){return function(t){a[e]=t}}function b(e){if(d(f,e)){var t=f[e];delete f[e];c[e]=true;i.apply(r,t)}if(!d(a,e)&&!d(c,e)){throw new Error("No "+e)}return a[e]}function w(e){var t,n=e?e.indexOf("!"):-1;if(n>-1){t=e.substring(0,n);e=e.substring(n+1,e.length)}return[t,e]}function E(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice;o=function(e,t){var n,r=w(e),i=r[0];e=r[1];if(i){i=v(i,t);n=b(i)}if(i){if(n&&n.normalize){e=n.normalize(e,g(t))}else{e=v(e,t)}}else{e=v(e,t);r=w(e);i=r[0];e=r[1];if(i){n=b(i)}}return{f:i?i+"!"+e:e,n:e,pr:i,p:n}};u={require:function(e){return m(e)},exports:function(e){var t=a[e];if(typeof t!=="undefined"){return t}else{return a[e]={}}},module:function(e){return{id:e,uri:"",exports:a[e],config:E(e)}}};i=function(e,t,n,i){var s,l,h,p,v,g=[],w;i=i||e;if(typeof n==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(v=0;v<t.length;v+=1){p=o(t[v],i);l=p.f;if(l==="require"){g[v]=u.require(e)}else if(l==="exports"){g[v]=u.exports(e);w=true}else if(l==="module"){s=g[v]=u.module(e)}else if(d(a,l)||d(f,l)||d(c,l)){g[v]=b(l)}else if(p.p){p.p.load(p.n,m(i,true),y(l),{});g[v]=a[l]}else{throw new Error(e+" missing "+l)}}h=n.apply(a[e],g);if(e){if(s&&s.exports!==r&&s.exports!==a[e]){a[e]=s.exports}else if(h!==r||!w){a[e]=h}}}else if(e){a[e]=n}};e=t=s=function(e,t,n,a,f){if(typeof e==="string"){if(u[e]){return u[e](t)}return b(o(e,t).f)}else if(!e.splice){l=e;if(t.splice){e=t;t=n;n=null}else{e=r}}t=t||function(){};if(typeof n==="function"){n=a;a=f}if(a){i(r,e,t,n)}else{setTimeout(function(){i(r,e,t,n)},4)}return s};s.config=function(e){l=e;if(l.deps){s(l.deps,l.callback)}return s};n=function(e,t,n){if(!t.splice){n=t;t=[]}if(!d(a,e)&&!d(f,e)){f[e]=[e,t,n]}};n.amd={jQuery:true}})();n("vendor/almond",function(){});!function(e){function t(e){return typeof e.toString!="function"&&typeof (e+"")=="string"}function r(){}function i(e){e.length=0,b.length<x&&b.push(e)}function s(e){var t=e.k;t&&s(t),e.b=e.k=e.object=e.number=e.string=null,w.length<x&&w.push(e)}function o(){}function u(e,t,n){function r(){var a=arguments,l=s?this:t;return i||(e=t[o]),n.length&&(a=a.length?(a=G.call(a),u?a.concat(n):n.concat(a)):n),this instanceof r?(l=f(e.prototype),a=e.apply(l,a),d(a)?a:l):e.apply(l,a)}var i=p(e),s=!n,o=t;if(s){var u=void 0;n=t}else if(!i)throw new TypeError;return r}function a(){var e=w.pop()||{a:"",b:null,c:"",k:null,"false":!1,d:"",e:"",f:"","null":!1,number:null,object:null,push:null,g:null,string:null,h:"","true":!1,"undefined":!1,i:!1,j:!1};e.g=N,e.b=e.c=e.f=e.h="",e.e="r",e.i=!0,e.j=!!it;for(var t,n=0;t=arguments[n];n++)for(var r in t)e[r]=t[r];n=e.a,e.d=/^[^,]+/.exec(n)[0],t=Function,n="return function("+n+"){",r="var m,r="+e.d+",C="+e.e+";if(!r)return C;"+e.h+";",e.b?(r+="var s=r.length;m=-1;if("+e.b+"){",et.unindexedChars&&(r+="if(q(r)){r=r.split('')}"),r+="while(++m<s){"+e.f+";}}else{"):et.nonEnumArgs&&(r+="var s=r.length;m=-1;if(s&&n(r)){while(++m<s){m+='';"+e.f+";}}else{"),et.enumPrototypes&&(r+="var E=typeof r=='function';"),et.enumErrorProps&&(r+="var D=r===j||r instanceof Error;");var i=[];if(et.enumPrototypes&&i.push('!(E&&m=="prototype")'),et.enumErrorProps&&i.push('!(D&&(m=="message"||m=="name"))'),e.i&&e.j)r+="var A=-1,B=z[typeof r]&&t(r),s=B?B.length:0;while(++A<s){m=B[A];",i.length&&(r+="if("+i.join("&&")+"){"),r+=e.f+";",i.length&&(r+="}"),r+="}";else if(r+="for(m in r){",e.i&&i.push("l.call(r, m)"),i.length&&(r+="if("+i.join("&&")+"){"),r+=e.f+";",i.length&&(r+="}"),r+="}",et.nonEnumShadows){for(r+="if(r!==y){var h=r.constructor,p=r===(h&&h.prototype),e=r===H?G:r===j?i:J.call(r),v=w[e];",k=0;7>k;k++)r+="m='"+e.g[k]+"';if((!(p&&v[m])&&l.call(r,m))",e.i||(r+="||(!v[m]&&r[m]!==y[m])"),r+="){"+e.f+"}";r+="}"}return(e.b||et.nonEnumArgs)&&(r+="}"),r+=e.c+";return C",t=t("i,j,l,n,o,q,t,u,y,z,w,G,H,J",n+r+"}"),s(e),t(M,I,W,l,nt,v,it,o,q,B,Z,H,R,V)}function f(e){return d(e)?J(e):{}}function l(e){return V.call(e)==C}function c(e){var t=[];return ot(e,function(e,n){p(e)&&t.push(n)}),t.sort()}function h(e,n,r,s,u,a){var f=r===S;if(typeof r=="function"&&!f){r=o.createCallback(r,s,2);var c=r(e,n);if(typeof c!="undefined")return!!c}if(e===n)return 0!==e||1/e==1/n;var d=typeof e,v=typeof n;if(e===e&&(!e||"function"!=d&&"object"!=d)&&(!n||"function"!=v&&"object"!=v))return!1;if(null==e||null==n)return e===n;if(v=V.call(e),d=V.call(n),v==C&&(v=D),d==C&&(d=D),v!=d)return!1;switch(v){case A:case O:return+e==+n;case _:return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case P:case H:return e==n+""}if(d=v==L,!d){if(W.call(e,"__wrapped__")||W.call(n,"__wrapped__"))return h(e.__wrapped__||e,n.__wrapped__||n,r,s,u,a);if(v!=D||!et.nodeClass&&(t(e)||t(n)))return!1;var v=!et.argsObject&&l(e)?Object:e.constructor,m=!et.argsObject&&l(n)?Object:n.constructor;if(v!=m&&!(p(v)&&v instanceof v&&p(m)&&m instanceof m))return!1}for(m=!u,u||(u=b.pop()||[]),a||(a=b.pop()||[]),v=u.length;v--;)if(u[v]==e)return a[v]==n;var g=0,c=!0;if(u.push(e),a.push(n),d){if(v=e.length,g=n.length,c=g==e.length,!c&&!f)return c;for(;g--;)if(d=v,m=n[g],f)for(;d--&&!(c=h(e[d],m,r,s,u,a)););else if(!(c=h(e[g],m,r,s,u,a)))break;return c}return ot(n,function(t,n,i){return W.call(i,n)?(g++,c=W.call(e,n)&&h(e[n],t,r,s,u,a)):void 0}),c&&!f&&ot(e,function(e,t,n){return W.call(n,t)?c=-1<--g:void 0}),m&&(i(u),i(a)),c}function p(e){return typeof e=="function"}function d(e){return!(!e||!B[typeof e])}function v(e){return typeof e=="string"||V.call(e)==H}function m(e,t,n){if(t&&typeof n=="undefined"&&nt(e)){n=-1;for(var r=e.length;++n<r&&false!==t(e[n],n,e););}else st(e,t,n);return e}function g(e,t){return et.fastBind||$&&2<arguments.length?$.call.apply($,arguments):u(e,t,G.call(arguments,2))}function y(e){return e}var b=[],w=[],E=0,S={},x=40,T=(T=/\bthis\b/)&&T.test(function(){return this})&&T,N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),C="[object Arguments]",L="[object Array]",A="[object Boolean]",O="[object Date]",M="[object Error]",_="[object Number]",D="[object Object]",P="[object RegExp]",H="[object String]",B={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},j=B[typeof global]&&global;!j||j.global!==j&&j.window!==j||(e=j);var F=[],I=Error.prototype,q=Object.prototype,R=String.prototype,j=RegExp("^"+(q.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),U=F.concat,z=Function.prototype.toString,W=q.hasOwnProperty,X=q.propertyIsEnumerable,V=q.toString,$=j.test($=V.bind)&&$,J=j.test(J=Object.create)&&J,K=j.test(K=Array.isArray)&&K,Q=j.test(Q=Object.keys)&&Q,G=F.slice;e=j.test(e.attachEvent);var Y=$&&!/\n|true/.test($+e),Z={};Z[L]=Z[O]=Z[_]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Z[A]=Z[H]={constructor:!0,toString:!0,valueOf:!0},Z[M]=Z["[object Function]"]=Z[P]={constructor:!0,toString:!0},Z[D]={constructor:!0},function(){for(var e=N.length;e--;){var t,n=N[e];for(t in Z)W.call(Z,t)&&!W.call(Z[t],n)&&(Z[t][n]=!1)}}();var et=o.support={};!function(){function e(){this.x=1}var t=[];e.prototype={valueOf:1};for(var n in new e)t.push(n);for(n in arguments);et.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),et.argsClass=l(arguments),et.enumErrorProps=X.call(I,"message")||X.call(I,"name"),et.enumPrototypes=X.call(e,"prototype"),et.fastBind=$&&!Y,et.nonEnumArgs=0!=n,et.nonEnumShadows=!/valueOf/.test(t),et.unindexedChars="xx"!="x"[0]+Object("x")[0];try{et.nodeClass=!(V.call(document)==D&&!({toString:0}+""))}catch(r){et.nodeClass=!0}}(1);var tt={a:"x,F,k",h:"var a=arguments,b=0,c=typeof k=='number'?2:a.length;while(++b<c){r=a[b];if(r&&z[typeof r]){",f:"if(typeof C[m]=='undefined')C[m]=r[m]",c:"}}"};e={a:"f,d,I",h:"d=d&&typeof I=='undefined'?d:u.createCallback(d,I)",b:"typeof s=='number'",f:"if(d(r[m],m,f)===false)return C"},j={h:"if(!z[typeof r])return C;"+e.h,b:!1},J||(f=function(e){if(d(e)){r.prototype=e;var t=new r;r.prototype=null}return t||{}}),et.argsClass||(l=function(e){return e?W.call(e,"callee"):!1});var nt=K||function(e){return e?typeof e=="object"&&V.call(e)==L:!1},rt=a({a:"x",e:"[]",h:"if(!(z[typeof x]))return C",f:"C.push(m)"}),it=Q?function(e){return d(e)?et.enumPrototypes&&typeof e=="function"||et.nonEnumArgs&&e.length&&l(e)?rt(e):Q(e):[]}:rt,st=a(e),K=a(tt,{h:tt.h.replace(";",";if(c>3&&typeof a[c-2]=='function'){var d=u.createCallback(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){d=a[--c]}"),f:"C[m]=d?d(C[m],r[m]):r[m]"}),tt=a(tt),ot=a(e,j,{i:!1});p(/x/)&&(p=function(e){return typeof e=="function"&&"[object Function]"==V.call(e)}),o.assign=K,o.bind=g,o.bindAll=function(e){for(var t=1<arguments.length?U.apply(F,G.call(arguments,1)):c(e),n=-1,r=t.length;++n<r;){var i=t[n];e[i]=g(e[i],e)}return e},o.createCallback=function(e,t,n){if(null==e)return y;var r=typeof e;if("function"!=r){if("object"!=r)return function(t){return t[e]};var i=it(e);return function(t){for(var n=i.length,r=!1;n--&&(r=h(t[i[n]],e[i[n]],S)););return r}}return typeof t=="undefined"||T&&!T.test(z.call(e))?e:1===n?function(n){return e.call(t,n)}:2===n?function(n,r){return e.call(t,n,r)}:4===n?function(n,r,i,s){return e.call(t,n,r,i,s)}:function(n,r,i){return e.call(t,n,r,i)}},o.defaults=tt,o.forEach=m,o.forIn=ot,o.functions=c,o.invoke=function(e,t){var n=G.call(arguments,2),r=-1,i=typeof t=="function",s=e?e.length:0,o=Array(typeof s=="number"?s:0);return m(e,function(e){o[++r]=(i?t:e[t]).apply(e,n)}),o},o.keys=it,o.once=function(e){var t,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},o.values=function(e){for(var t=-1,n=it(e),r=n.length,i=Array(r);++t<r;)i[t]=e[n[t]];return i},o.each=m,o.extend=K,o.methods=c,o.identity=y,o.isArguments=l,o.isArray=nt,o.isEqual=h,o.isFunction=p,o.isObject=d,o.isString=v,o.uniqueId=function(e){var t=++E;return(null==e?"":e)+""+t},o.VERSION="1.3.1",typeof n=="function"&&typeof n.amd=="object"&&n.amd&&n("underscore",[],function(){return o})}(this);n("browserutils",{supportHTML5Audio:function(){var e;try{if(window.HTMLAudioElement&&typeof Audio!=="undefined"){e=new Audio;return true}}catch(t){return false}},supportSourceSwappingWithPreload:function(){return/Firefox/i.test(navigator.userAgent)},isMobile:function(e){var t=window.navigator.userAgent,n=["mobile","iPhone","iPad","iPod","Android","Skyfire"];return n.some(function(e){e=new RegExp(e,"i");return e.test(t)})},canPlayType:function(e){var t=document.createElement("audio");if(!t||!t.canPlayType){return false}else{return t.canPlayType(e).match(/maybe|probably/i)?true:false}},isNativeHlsSupported:function(){var e=navigator.userAgent,t=["iPhone","iPad","iPod"],n,r,i;n=function(t){return t.test(e)};r=!n(/chrome/i)&&!n(/opera/i)&&n(/safari/i);i=t.some(function(e){return n(new RegExp(e,"i"))});return i||r}});n("errors",{FLASH_HLS_PLAYLIST_NOT_FOUND:"HLS_PLAYLIST_NOT_FOUND",FLASH_HLS_PLAYLIST_SECURITY_ERROR:"HLS_SECURITY_ERROR",FLASH_HLS_NOT_VALID_PLAYLIST:"HLS_NOT_VALID_PLAYLIST",FLASH_HLS_NO_TS_IN_PLAYLIST:"HLS_NO_TS_IN_PLAYLIST",FLASH_HLS_NO_PLAYLIST_IN_MANIFEST:"HLS_NO_PLAYLIST_IN_MANIFEST",FLASH_HLS_TS_IS_CORRUPT:"HLS_TS_IS_CORRUPT",FLASH_HLS_FLV_TAG_CORRUPT:"HLS_FLV_TAG_CORRUPT",FLASH_HTTP_FILE_NOT_FOUND:"HTTP_FILE_NOT_FOUND",FLASH_RTMP_CONNECT_FAILED:"RTMP_CONNECT_FAILED",FLASH_RTMP_CONNECT_CLOSED:"RTMP_CONNECT_CLOSED",FLASH_RTMP_CANNOT_PLAY_STREAM:"RTMP_CANNOT_PLAY_STREAM",FLASH_PROXY_CANT_LOAD_FLASH:"CANT_LOAD_FLASH",FLASH_PROXY_FLASH_BLOCKED:"FLASH_PROXY_FLASH_BLOCKED",HTML5_AUDIO_ABORTED:"HTML5_AUDIO_ABORTED",HTML5_AUDIO_NETWORK:"HTML5_AUDIO_NETWORK",HTML5_AUDIO_DECODE:"HTML5_AUDIO_DECODE",HTML5_AUDIO_SRC_NOT_SUPPORTED:"HTML5_AUDIO_SRC_NOT_SUPPORTED",HTML5_AUDIO_ENDED_EARLY:"HTML5_AUDIO_ENDED_EARLY",HTML5_AUDIO_OVERRUN:"HTML5_AUDIO_OVERRUN"});n("vendor/events",["require","exports","module","underscore"],function(e,t,n){var r=e("underscore");var i=[];var s=i.push;var o=i.slice;var u=i.splice;var a=/\s+/;var f=function(e,t,n,r){if(!n)return true;if(typeof n==="object"){for(var i in n){e[t].apply(e,[i,n[i]].concat(r))}}else if(a.test(n)){var s=n.split(a);for(var o=0,u=s.length;o<u;o++){e[t].apply(e,[s[o]].concat(r))}}else{return true}};var l=function(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:while(++r<i){n=e[r];n.callback.call(n.ctx)}return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}};var c={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);r.push({callback:t,context:n,ctx:n||this});return this},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var i=this;var s=r.once(function(){i.off(e,s);t.apply(this,arguments)});s._callback=t;return this.on(e,s,n)},off:function(e,t,n){var i,s,o,u,a,l,c,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&&!t&&!n){this._events={};return this}u=e?[e]:r.keys(this._events);for(a=0,l=u.length;a<l;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||n){for(c=0,h=o.length;c<h;c++){s=o[c];if(t&&t!==s.callback&&t!==s.callback._callback||n&&n!==s.context){i.push(s)}}}if(!i.length)delete this._events[e]}}return this},trigger:function(e,t){if(!this._events)return this;var t=o.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e];var r=this._events.all;if(n)l(n,t);if(r)l(r,arguments);return this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;if(typeof t==="object")n=this;if(e)(r={})[e._listenerId]=e;for(var s in r){r[s].off(t,n,this);if(i)delete this._listeners[s]}return this}};var h={listenTo:"on",listenToOnce:"once"};r.each(h,function(e,t){c[t]=function(t,n,i){var s=this._listeners||(this._listeners={});var o=t._listenerId||(t._listenerId=r.uniqueId("l"));s[o]=t;if(typeof n==="object")i=this;t[e](n,i,this);return this}});c.bind=c.on;c.unbind=c.off;n.exports=c});n("logger",["require","exports","module"],function(e,t,n){var r;n.exports=r=function(e,t,n){this.enabled=n.debug;this.type=e;this.id=t};r.prototype.log=function(e){if(!this.enabled){return}window.console.log("#"+this.type+" "+this.id+"# "+e)}});n("states",{PLAYING:"playing",LOADING:"loading",SEEKING:"seeking",PAUSED:"paused",ERROR:"error",IDLE:"idle",INITIALIZE:"initialize",ENDED:"ended",DEAD:"dead"});n("vendor/swfobject",[],function(){function L(){if(w||!document.getElementsByTagName("body")[0]){return}try{var e,t=X("span");t.style.display="none";e=a.getElementsByTagName("body")[0].appendChild(t);e.parentNode.removeChild(e);e=null;t=null}catch(n){return}w=true;var r=h.length;for(var i=0;i<r;i++){h[i]()}}function A(e){if(w){e()}else{h[h.length]=e}}function O(t){if(typeof u.addEventListener!=e){u.addEventListener("load",t,false)}else if(typeof a.addEventListener!=e){a.addEventListener("load",t,false)}else if(typeof u.attachEvent!=e){$(u,"onload",t)}else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n();t()}}else{u.onload=t}}function M(){var n=a.getElementsByTagName("body")[0];var r=X(t);r.setAttribute("style","visibility: hidden;");r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function u(){if(typeof s.GetVariable!=e){try{var t=s.GetVariable("$version");if(t){t=t.split(" ")[1].split(",");C.pv=[V(t[0]),V(t[1]),V(t[2])]}}catch(i){C.pv=[8,0,0]}}else if(o<10){o++;setTimeout(u,10);return}n.removeChild(r);s=null;_()})()}else{_()}}function _(){var t=p.length;if(t>0){for(var n=0;n<t;n++){var r=p[n].id;var i=p[n].callbackFn;var s={success:false,id:r};if(C.pv[0]>0){var o=W(r);if(o){if(J(p[n].swfVersion)&&!(C.wk&&C.wk<312)){Q(r,true);if(i){s.success=true;s.ref=D(r);s.id=r;i(s)}}else if(p[n].expressInstall&&P()){var u={};u.data=p[n].expressInstall;u.width=o.getAttribute("width")||"0";u.height=o.getAttribute("height")||"0";if(o.getAttribute("class")){u.styleclass=o.getAttribute("class")}if(o.getAttribute("align")){u.align=o.getAttribute("align")}var a={};var f=o.getElementsByTagName("param");var l=f.length;for(var c=0;c<l;c++){if(f[c].getAttribute("name").toLowerCase()!="movie"){a[f[c].getAttribute("name")]=f[c].getAttribute("value")}}H(u,a,r,i)}else{B(o);if(i){i(s)}}}}else{Q(r,true);if(i){var h=D(r);if(h&&typeof h.SetVariable!=e){s.success=true;s.ref=h;s.id=h.id}i(s)}}}}}function D(n){var r=null,i=W(n);if(i&&i.nodeName.toUpperCase()==="OBJECT"){if(typeof i.SetVariable!==e){r=i}else{r=i.getElementsByTagName(t)[0]||i}}return r}function P(){return!E&&J("6.0.65")&&(C.win||C.mac)&&!(C.wk&&C.wk<312)}function H(t,n,r,i){var o=W(r);r=z(r);E=true;y=i||null;b={success:false,id:r};if(o){if(o.nodeName.toUpperCase()=="OBJECT"){m=j(o);g=null}else{m=o;g=r}t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&V(t.width)<310){t.width="310"}if(typeof t.height==e||!/%$/.test(t.height)&&V(t.height)<137){t.height="137"}var f=C.ie?"ActiveX":"PlugIn",l="MMredirectURL="+encodeURIComponent(u.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+f+"&MMdoctitle="+encodeURIComponent(a.title.slice(0,47)+" - Flash Player Installation");if(typeof n.flashvars!=e){n.flashvars+="&"+l}else{n.flashvars=l}if(C.ie&&o.readyState!=4){var c=X("div");r+="SWFObjectNew";c.setAttribute("id",r);o.parentNode.insertBefore(c,o);o.style.display="none";R(o)}I(t,n,r)}}function B(e){if(C.ie&&e.readyState!=4){e.style.display="none";var t=X("div");e.parentNode.insertBefore(t,e);t.parentNode.replaceChild(j(e),t);R(e)}else{e.parentNode.replaceChild(j(e),e)}}function j(e){var n=X("div");if(C.win&&C.ie){n.innerHTML=e.innerHTML}else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++){if(!(i[o].nodeType==1&&i[o].nodeName=="PARAM")&&!(i[o].nodeType==8)){n.appendChild(i[o].cloneNode(true))}}}}}return n}function F(e,t){var n=X("div");n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>";return n.firstChild}function I(n,r,s){var o,u=W(s);s=z(s);if(C.wk&&C.wk<312){return o}if(u){var a=C.ie?X("div"):X(t),f,l,c;if(typeof n.id==e){n.id=s}for(c in r){if(r.hasOwnProperty(c)&&c.toLowerCase()!=="movie"){q(a,c,r[c])}}if(C.ie){a=F(n.data,a.innerHTML)}for(f in n){if(n.hasOwnProperty(f)){l=f.toLowerCase();if(l==="styleclass"){a.setAttribute("class",n[f])}else if(l!=="classid"&&l!=="data"){a.setAttribute(f,n[f])}}}if(C.ie){d[d.length]=n.id}else{a.setAttribute("type",i);a.setAttribute("data",n.data)}u.parentNode.replaceChild(a,u);o=a}return o}function q(e,t,n){var r=X("param");r.setAttribute("name",t);r.setAttribute("value",n);e.appendChild(r)}function R(e){var t=W(e);if(t&&t.nodeName.toUpperCase()=="OBJECT"){if(C.ie){t.style.display="none";(function n(){if(t.readyState==4){for(var e in t){if(typeof t[e]=="function"){t[e]=null}}t.parentNode.removeChild(t)}else{setTimeout(n,10)}})()}else{t.parentNode.removeChild(t)}}}function U(e){return e&&e.nodeType&&e.nodeType===1}function z(e){return U(e)?e.id:e}function W(e){if(U(e)){return e}var t=null;try{t=a.getElementById(e)}catch(n){}return t}function X(e){return a.createElement(e)}function V(e){return parseInt(e,10)}function $(e,t,n){e.attachEvent(t,n);v[v.length]=[e,t,n]}function J(e){e+="";var t=C.pv,n=e.split(".");n[0]=V(n[0]);n[1]=V(n[1])||0;n[2]=V(n[2])||0;return t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?true:false}function K(t,n,r,i){var s=a.getElementsByTagName("head")[0];if(!s){return}var o=typeof r=="string"?r:"screen";if(i){S=null;x=null}if(!S||x!=o){var u=X("style");u.setAttribute("type","text/css");u.setAttribute("media",o);S=s.appendChild(u);if(C.ie&&typeof a.styleSheets!=e&&a.styleSheets.length>0){S=a.styleSheets[a.styleSheets.length-1]}x=o}if(S){if(typeof S.addRule!=e){S.addRule(t,n)}else if(typeof a.createTextNode!=e){S.appendChild(a.createTextNode(t+" {"+n+"}"))}}}function Q(e,t){if(!T){return}var n=t?"visible":"hidden",r=W(e);if(w&&r){r.style.visibility=n}else if(typeof e==="string"){K("#"+e,"visibility:"+n)}}function G(t){var n=/[\\\"<>\.;]/;var r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l,c=false,h=[],p=[],d=[],v=[],m,g,y,b,w=false,E=false,S,x,T=true,N=false,C=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),l=f.platform.toLowerCase(),h=l?/win/.test(l):/win/.test(o),p=l?/mac/.test(l):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,v=f.appName==="Microsoft Internet Explorer",m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t){g=f.plugins[n].description;if(g&&typeof f.mimeTypes!=e&&f.mimeTypes[i]&&f.mimeTypes[i].enabledPlugin){c=true;v=false;g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1");m[0]=V(g.replace(/^(.*)\..*$/,"$1"));m[1]=V(g.replace(/^.*\.(.*)\s.*$/,"$1"));m[2]=/[a-zA-Z]/.test(g)?V(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0}}else if(typeof u.ActiveXObject!=e){try{var y=new ActiveXObject(r);if(y){g=y.GetVariable("$version");if(g){v=true;g=g.split(" ")[1].split(",");m=[V(g[0]),V(g[1]),V(g[2])]}}}catch(b){}}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),k=function(){if(!C.w3){return}if(typeof a.readyState!=e&&(a.readyState==="complete"||a.readyState==="interactive")||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body)){L()}if(!w){if(typeof a.addEventListener!=e){a.addEventListener("DOMContentLoaded",L,false)}if(C.ie){a.attachEvent(o,function t(){if(a.readyState=="complete"){a.detachEvent(o,t);L()}});if(u==top){(function n(){if(w){return}try{a.documentElement.doScroll("left")}catch(e){setTimeout(n,0);return}L()})()}}if(C.wk){(function r(){if(w){return}if(!/loaded|complete/.test(a.readyState)){setTimeout(r,0);return}L()})()}}}();h[0]=function(){if(c){M()}else{_()}};var Y=function(){if(C.ie){window.attachEvent("onunload",function(){var e=v.length;for(var t=0;t<e;t++){v[t][0].detachEvent(v[t][1],v[t][2])}var n=d.length;for(var r=0;r<n;r++){R(d[r])}for(var i in C){C[i]=null}C=null;for(var s in l){l[s]=null}l=null})}}();return l={registerObject:function(e,t,n,r){if(C.w3&&e&&t){var i={};i.id=e;i.swfVersion=t;i.expressInstall=n;i.callbackFn=r;p[p.length]=i;Q(e,false)}else if(r){r({success:false,id:e})}},getObjectById:function(e){if(C.w3){return D(e)}},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h=z(r),p={success:false,id:h};if(C.w3&&!(C.wk&&C.wk<312)&&n&&r&&i&&s&&o){Q(h,false);A(function(){i+="";s+="";var d={};if(l&&typeof l===t){for(var v in l){d[v]=l[v]}}d.data=n;d.width=i;d.height=s;var m={};if(f&&typeof f===t){for(var g in f){m[g]=f[g]}}if(a&&typeof a===t){for(var y in a){if(a.hasOwnProperty(y)){var b=N?encodeURIComponent(y):y,w=N?encodeURIComponent(a[y]):a[y];if(typeof m.flashvars!=e){m.flashvars+="&"+b+"="+w}else{m.flashvars=b+"="+w}}}}if(J(o)){var E=I(d,m,r);if(d.id==h){Q(h,true)}p.success=true;p.ref=E;p.id=E.id}else if(u&&P()){d.data=u;H(d,m,r,c);return}else{Q(h,true)}if(c){c(p)}})}else if(c){c(p)}},switchOffAutoHideShow:function(){T=false},enableUriEncoding:function(t){N=typeof t===e?true:t},ua:C,getFlashPlayerVersion:function(){return{major:C.pv[0],minor:C.pv[1],release:C.pv[2]}},hasFlashPlayerVersion:J,createSWF:function(e,t,n){if(C.w3){return I(e,t,n)}else{return undefined}},showExpressInstall:function(e,t,n,r){if(C.w3&&P()){H(e,t,n,r)}},removeSWF:function(e){if(C.w3){R(e)}},createCSS:function(e,t,n,r){if(C.w3){K(e,t,n,r)}},addDomLoadEvent:A,addLoadEvent:O,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){if(/\?/.test(t)){t=t.split("?")[1]}if(e==null){return G(t)}var n=t.split("&");for(var r=0;r<n.length;r++){if(n[r].substring(0,n[r].indexOf("="))==e){return G(n[r].substring(n[r].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(E){var e=W(s);if(e&&m){e.parentNode.replaceChild(m,e);if(g){Q(g,true);if(C.ie){m.style.display="block"}}if(y){y(b)}}E=false}},version:"2.3"}});n("flashaudioproxy",["require","exports","module","underscore","errors","vendor/events","logger","states","vendor/swfobject"],function(e,t,n){var r,i=e("underscore"),s=e("errors"),o=e("vendor/events"),u=e("logger"),a=e("states"),f=e("vendor/swfobject");n.exports=r=function(e,t){this._descriptor=e;this._id=e.id;this._autoPlay=e.autoPlay||false;r.players[e.id]=this;this._errorMessage=null;this._errorID=null;this._state=a.INITIALIZE;this._settings=t;this._volume=1;this._muted=false;this._logger=new u(this.getType(),this._id,t);if(!r.creatingFlashAudio){if(r.flashAudio){this._createFlashAudio()}else{r.createFlashObject(t)}}};r.createFlashObject=function(e){r.creatingFlashAudio=true;r.containerElement=document.createElement("div");r.containerElement.setAttribute("id",e.flashObjectID+"-container");r.flashElementTarget=document.createElement("div");r.flashElementTarget.setAttribute("id",e.flashObjectID+"-target");r.containerElement.appendChild(r.flashElementTarget);document.body.appendChild(r.containerElement);var t=function(t){if(!t.success){for(var n in r.players){if(r.players.hasOwnProperty(n)){r.players[n]._errorID=s.FLASH_PROXY_CANT_LOAD_FLASH;r.players[n]._errorMessage="Cannot create flash object";r.players[n]._setState(a.ERROR)}}return}r.flashAudio=document.getElementById(e.flashObjectID);setTimeout(function(){if(r.flashAudio&&!("PercentLoaded"in r.flashAudio)){for(var e in r.players){if(r.players.hasOwnProperty(e)){r.players[e]._errorID=s.FLASH_PROXY_FLASH_BLOCKED;r.players[e]._errorMessage="Flash object blocked";r.players[e]._setState(a.ERROR);r.players[e]._logger.type=r.players[e].getType();r.players[e]._logger.log(r.players[e]._errorMessage)}}}},e.flashLoadTimeout);r.flashAudio.onPositionChange=function(e,t,n,i){r.players[e]._onPositionChange(t,n,i)};r.flashAudio.onDebug=function(e,t,n){r.players[e]._logger.type=t;r.players[e]._logger.log(n)};r.flashAudio.onStateChange=function(e,t){r.players[e]._setState(t);if(t===a.DEAD){delete r.players[e]}};r.flashAudio.onInit=function(e){r.creatingFlashAudio=false;i.invoke(i.values(r.players),"_createFlashAudio")}};if(!document.getElementById(e.flashObjectID)){f.embedSWF(e.flashAudioPath,e.flashObjectID+"-target","1","1","9.0.24","",{json:encodeURIComponent(JSON.stringify(e))},{allowscriptaccess:"always"},{id:e.flashObjectID},t)}};r._ready=function(){return r.flashAudio&&!r.creatingFlashAudio};i.extend(r.prototype,o);r.players={};r.prototype._createFlashAudio=function(){r.flashAudio.createAudio(this._descriptor);this._state=r.flashAudio.getState(this._id);this.setVolume(this._volume);this.setMute(this._muted);if(this._autoPlay){this.play()}};r.prototype._setState=function(e){if(this._state===e){return}this._state=e;this.trigger("stateChange",e,this)};r.prototype._onPositionChange=function(e,t,n){this.trigger("positionChange",e,t,n,this)};r.prototype.getId=function(){return this._id};r.prototype.getType=function(){if(!r._ready()){return"Flash ..."}return r.flashAudio.getType(this._id)};r.prototype.getContainerElement=function(){return r.containerElement};r.prototype.play=function(e){if(!r._ready()){return}if(this.getState()===a.PAUSED||this.getState()===a.ENDED){this.resume();return}e=e===undefined?0:e;r.flashAudio.playAudio(this._id,e)};r.prototype.pause=function(){if(!r._ready()){return}r.flashAudio.pauseAudio(this._id)};r.prototype.seek=function(e){if(!r._ready()){return}r.flashAudio.seekAudio(this._id,e)};r.prototype.resume=function(){if(!r._ready()){return}r.flashAudio.resumeAudio(this._id)};r.prototype.setVolume=function(e){this._volume=e;if(!r._ready()){return}r.flashAudio.setVolume(this._id,e)};r.prototype.getVolume=function(){if(!r._ready()){return this._volume}return r.flashAudio.getVolume(this._id)};r.prototype.setMute=function(e){this._muted=e;if(!r._ready()){return}r.flashAudio.setMute(this._id,e)};r.prototype.getMute=function(){if(!r._ready()){return this._muted}return r.flashAudio.getMute(this._id)};r.prototype.getState=function(){return this._state};r.prototype.getCurrentPosition=function(){if(!r._ready()){return 0}return r.flashAudio.getCurrentPosition(this._id)};r.prototype.getLoadedPosition=function(){if(!r._ready()){return 0}return r.flashAudio.getLoadedPosition(this._id)};r.prototype.getDuration=function(){if(!r._ready()){return 0}return r.flashAudio.getDuration(this._id)};r.prototype.kill=function(){if(!r._ready()){return 0}r.flashAudio.killAudio(this._id)};r.prototype.getErrorMessage=function(){if(this._errorMessage){return this._errorMessage}return r.flashAudio.getErrorMessage(this._id)};r.prototype.getErrorID=function(){if(this._errorID){return this._errorID}return r.flashAudio.getErrorID(this._id)};r.prototype.getLevelNum=function(){if(!r._ready()){return 0}return r.flashAudio.getLevelNum(this._id)};r.prototype.getLevel=function(){if(!r._ready()){return 0}return r.flashAudio.getLevel(this._id)};r.prototype.setLevel=function(e){if(!r._ready()){return 0}return r.flashAudio.setLevel(this._id,e)};r.prototype.preload=function(){return false}});n("html5audioplayer",["require","exports","module","underscore","vendor/events","states","errors","logger"],function(e,t,n){var r,i=e("underscore"),s=e("vendor/events"),o=e("states"),u=e("errors"),a=e("logger");n.exports=r=function(e,t){this._id=e.id;this._descriptor=e;this._isLoaded=false;this._settings=t;this._bufferingTimeout=null;this._currentPosition=0;this._loadedPosition=0;this._prevCurrentPosition=0;this._prevCheckTime=0;this._prevComparison=0;this._positionUpdateTimer=0;this._playRequested=false;this._startFromPosition=0;if(e.duration){this._duration=e.duration}i.bindAll(this,"_onPositionChange","_onStateChange","_onLoaded","_onBuffering");this._init();this.toggleEventListeners(true);if(this._descriptor.preload){this.preload()}if(e.autoPlay){this.play()}else{this._setState(o.IDLE)}};i.extend(r.prototype,s);r.prototype._init=function(){this._html5Audio=new Audio;this._html5Audio.mozAudioChannelType="content";this._html5Audio.id=this._settings.audioObjectID+"_"+this._descriptor.id;this._html5Audio.preload="none";this._logger=new a(this.getType(),this._id,this._settings)};r.prototype.getId=function(){return this._id};r.prototype.getType=function(){return"HTML5 audio"};r.prototype.play=function(e){if(this.isInOneOfStates(o.ERROR,o.DEAD)){return}if(this.isInOneOfStates(o.PAUSED,o.ENDED)){this.resume();return}this._logger.log("play");this._startFromPosition=e||0;this._setState(o.LOADING);this._playRequested=true;var t=function(){if(!this._playRequested){return}this._trySeekToStartPosition();this._html5Audio.play();clearInterval(this._positionUpdateTimer);this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)};if(this._isLoaded){t.apply(this)}else{this.preload();this.once("loaded",t)}};r.prototype._trySeekToStartPosition=function(){var e;if(this._startFromPosition>0){this._logger.log("seek to start position="+this._startFromPosition);e=this._startFromPosition/1e3;this._html5Audio.currentTime=e;if(this._html5Audio.currentTime===e){this._startFromPosition=0;return true}}return false};r.prototype.pause=function(){this._playRequested=false;if(this.isInOneOfStates(o.ERROR,o.DEAD)){return}this._logger.log("pause");this._html5Audio.pause();clearTimeout(this._bufferingTimeout);clearInterval(this._positionUpdateTimer)};r.prototype.seek=function(e){var t=false,n,r=this._html5Audio.seekable,i;if(this.isInOneOfStates(o.ERROR,o.DEAD)){return}if(!this._isLoaded){this.once("loaded",function(){this.seek(e)});return}n=e/1e3;for(i=0;i<r.length;i++){if(n<=r.end(i)&&n>=r.start(i)){t=true;break}}if(!t){return}this._logger.log("seek");this._setState(o.SEEKING);this._html5Audio.currentTime=e/1e3;clearTimeout(this._bufferingTimeout)};r.prototype.resume=function(){if(this.isInOneOfStates(o.ERROR,o.DEAD)){return}this._logger.log("resume");if(this.getState()===o.PAUSED){this._setState(o.LOADING);this._html5Audio.play(this._html5Audio.currentTime)}else if(this.getState()===o.ENDED){this._setState(o.LOADING);this._html5Audio.play(0)}clearInterval(this._positionUpdateTimer);this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)};r.prototype.setVolume=function(e){if(!this._html5Audio){return}this._html5Audio.volume=e};r.prototype.getVolume=function(){if(!this._html5Audio){return 1}return this._html5Audio.volume};r.prototype.setMute=function(e){if(!this._html5Audio){return}this._html5Audio.muted=e};r.prototype.getMute=function(){if(!this._html5Audio){return false}return this._html5Audio.muted};r.prototype.getState=function(){return this._state};r.prototype.getCurrentPosition=function(){return this._currentPosition};r.prototype.getLoadedPosition=function(){return this._loadedPosition};r.prototype.getDuration=function(){return this._duration};r.prototype.kill=function(){if(this._state===o.DEAD){return}clearInterval(this._positionUpdateTimer);clearTimeout(this._bufferingTimeout);this._playRequested=false;this.toggleEventListeners(false);this._html5Audio.pause();this._html5Audio.src=null;delete this._html5Audio;this._setState(o.DEAD)};r.prototype.getErrorMessage=function(){return this._errorMessage};r.prototype.getErrorID=function(){return this._errorID};r.prototype.preload=function(){var e=this._html5Audio;if(e.preload!=="auto"){this._logger.log("preload");e.preload="auto";e.type=this._descriptor.mimeType;e.src=this._descriptor.src;e.load()}};r.prototype._setState=function(e){if(this._state===e){return}this._logger.log('state changed "'+e+'"');this._state=e;this.trigger("stateChange",e,this)};r.prototype.toggleEventListeners=function(e){if(!this._html5Audio){return}var t=e?"addEventListener":"removeEventListener";["ended","play","playing","pause","seeking","waiting","seeked","error"].forEach(function(e){this._html5Audio[t](e,this._onStateChange)},this);this._html5Audio[t]("loadedmetadata",this._onLoaded)};r.prototype.isInOneOfStates=function(){for(var e in arguments){if(arguments[e]===this._state){return true}}return false};r.prototype.updatePositions=function(){this._currentPosition=this._html5Audio.currentTime*1e3;if(this._html5Audio.seekable.length>0){this._loadedPosition=this._html5Audio.seekable.end(0)*1e3}};r.prototype._onBuffering=function(){this._setState(o.LOADING)};r.prototype._onLoaded=function(e){if(this._duration===undefined||this._duration===0){this._duration=this._html5Audio.duration*1e3}this._isLoaded=true;this._logger.log('html5 audio event "'+e.type+'"');this.trigger("loaded",this)};r.prototype._onPositionChange=function(e){this.updatePositions();this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this);if(!this.isInOneOfStates(o.PLAYING,o.LOADING)){return}if(this._duration!==0&&this._currentPosition>this._duration){this._errorID=u.HTML5_AUDIO_OVERRUN;this._errorMessage=this._getErrorMessage(this._errorID);this._logger.log("html5 audio error: "+this._errorID+" "+this._errorMessage);this._setState(o.ERROR);this.toggleEventListeners(false);return}var t=(new Date).valueOf(),n=this._currentPosition-this._prevCurrentPosition,r=t-this._prevCheckTime,i;if(r===0){return}i=n/r;if(i>.7){clearTimeout(this._bufferingTimeout);this._setState(o.PLAYING);this._bufferingTimeout=null}else if(this._state===o.PLAYING&&this._bufferingTimeout==null){this._bufferingTimeout=setTimeout(this._onBuffering,this._settings.bufferingDelay)}this._prevCurrentPosition=this._currentPosition;this._prevCheckTime=t};r.prototype._onStateChange=function(e){this._logger.log('html5 audio event "'+e.type+'"');clearTimeout(this._bufferingTimeout);switch(e.type){case"playing":if(this._trySeekToStartPosition()){return}this.updatePositions();this._setState(o.PLAYING);break;case"pause":this._setState(o.PAUSED);break;case"ended":this._currentPosition=this._loadedPosition=this._duration;this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this);this._setState(o.ENDED);clearInterval(this._positionUpdateTimer);break;case"waiting":if(this.getState()===o.SEEKING){break}this._setState(o.LOADING);break;case"seeking":this._setState(o.SEEKING);break;case"seeked":this.updatePositions();if(this._html5Audio.paused){this._setState(o.PAUSED)}else{this._setState(o.PLAYING)}break;case"error":this._errorID={1:u.HTML5_AUDIO_ABORTED,2:u.HTML5_AUDIO_NETWORK,3:u.HTML5_AUDIO_DECODE,4:u.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code];this._errorMessage=this._getErrorMessage(this._errorID);this._logger.log("html5 audio error: "+this._errorID+" "+this._errorMessage);this._setState(o.ERROR);this.toggleEventListeners(false);break}};r.prototype._getErrorMessage=function(e){var t={};t[u.HTML5_AUDIO_ABORTED]="The fetching process was aborted by the user.";t[u.HTML5_AUDIO_NETWORK]="A network connection lost.";t[u.HTML5_AUDIO_DECODE]="An error occurred while decoding the media resource.";t[u.HTML5_AUDIO_SRC_NOT_SUPPORTED]="The media resource is not suitable.";t[u.HTML5_AUDIO_ENDED_EARLY]="Audio playback ended before the indicated duration of the track.";t[u.HTML5_AUDIO_OVERRUN]="Audio playback continued past end of the track.";return t[e]}});n("hlsaudioplayer",["require","exports","module","underscore","errors","vendor/events","html5audioplayer","logger","states"],function(e,t,n){var r,i=e("underscore"),s=e("errors"),o=e("vendor/events"),u=e("html5audioplayer"),a=e("logger"),f=e("states"),l=1;n.exports=r=function(e,t){u.apply(this,arguments);this._seekPosition=0};i.extend(r.prototype,u.prototype);r.prototype.getType=function(){return"HTML5 HLS audio"};r.prototype.seek=function(e){u.prototype.seek.apply(this,arguments);if(this.isInOneOfStates(f.LOADING)){this._seekPosition=e}};r.prototype.getCurrentPosition=function(){if(this.isInOneOfStates(f.LOADING)&&this._seekPosition>0){return this._seekPosition}return u.prototype.getCurrentPosition.apply(this,arguments)};r.prototype._onStateChange=function(e){this._logger.log('hls html5 audio event "'+e.type+'"');clearTimeout(this._bufferingTimeout);switch(e.type){case"playing":this.updatePositions();this._seekPosition=0;this._setState(f.PLAYING);break;case"pause":this._setState(f.PAUSED);break;case"ended":if(this._currentPosition+l<this._duration){this._errorID=s.HTML5_AUDIO_ENDED_EARLY;this._errorMessage=this._getErrorMessage(this._errorID);this._logger.log("html5 audio error: "+this._errorID+" "+this._errorMessage);this._setState(f.ERROR);this.toggleEventListeners(false);break}this._currentPosition=this._loadedPosition=this._duration;this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this);this._setState(f.ENDED);clearInterval(this._positionUpdateTimer);break;case"waiting":this._setState(f.LOADING);break;case"seeking":this._setState(f.SEEKING);break;case"seeked":this.updatePositions();if(this._html5Audio.paused){this._setState(f.PAUSED)}break;case"error":this._errorID={1:s.HTML5_AUDIO_ABORTED,2:s.HTML5_AUDIO_NETWORK,3:s.HTML5_AUDIO_DECODE,4:s.HTML5_AUDIO_SRC_NOT_SUPPORTED}[this._html5Audio.error.code];this._errorMessage=this._getErrorMessage(this._errorID);this._logger.log("html5 audio error: "+this._errorID+" "+this._errorMessage);this._setState(f.ERROR);this.toggleEventListeners(false);break}}});n("singleaudioplayer",["require","exports","module","underscore","browserutils","errors","vendor/events","html5audioplayer","logger","states"],function(e,t,n){function h(e){function t(t,n){var r=c[e._playerId];Object.keys(c).forEach(function(e){var t=c[e];if(t!==r){if(t.isInOneOfStates(l.PLAYING,l.LOADING)){t.pause()}}});if(r){r[t](n)}}var n=t.bind(null,"_onStateChange"),r=t.bind(null,"_onLoaded");["ended","play","playing","pause","seeking","waiting","seeked","error"].forEach(function(t){e.addEventListener(t,n)},this);e.addEventListener("loadedmetadata",r)}var r,i=e("underscore"),s=e("browserutils"),o=e("errors"),u=e("vendor/events"),a=e("html5audioplayer"),f=e("logger"),l=e("states"),c={};n.exports=r=function(e,t){a.apply(this,arguments)};i.extend(r.prototype,a.prototype);r.prototype._init=function(){if(!r._html5Audio){var e=new Audio;e.mozAudioChannelType="content";e.id=this._settings.audioObjectID+"_Single";e.preload="none";r._html5Audio=e;this._preloadAudio=e;h(e)}this._html5Audio=r._html5Audio;this._playRequested=false;this._logger=new f(this.getType(),this._id,this._settings)};r.prototype.toggleEventListeners=function(e){if(e){c[this._id]=this}else{delete c[this._id]}};r.prototype.getType=function(){return"HTML5 single audio"};r.prototype.play=function(e){this._playRequested=true;if(this._html5Audio._playerId===this._descriptor.id&&this.isInOneOfStates(l.PAUSED,l.ENDED)){a.prototype.resume.apply(this,arguments);return}if(this.isInOneOfStates(l.PAUSED)){e=this._currentPosition}this._startFromPosition=e||0;this._html5Audio._playerId=this._descriptor.id;this.toggleEventListeners(true);this._setState(l.LOADING);var t=function(){if(!this._playRequested){return}this._logger.log("play after loaded");this._trySeekToStartPosition();this._html5Audio.play();clearInterval(this._positionUpdateTimer);this._positionUpdateTimer=setInterval(this._onPositionChange,this._settings.updateInterval)};if(this._html5Audio.readyState>0&&this._descriptor.src===this._html5Audio.src){t.apply(this)}else{this.once("loaded",t);this._html5Audio.type=this._descriptor.mimeType;this._html5Audio.src=this._descriptor.src;this._html5Audio.preload="auto";this._html5Audio.load()}};r.prototype.pause=function(){this._playRequested=false;if(this.isInOneOfStates(l.ERROR,l.DEAD)){return}this._logger.log("pause");if(this._html5Audio._playerId===this._descriptor.id){this._html5Audio.pause()}else{this.toggleEventListeners(false);this._setState(l.PAUSED)}clearTimeout(this._bufferingTimeout);clearInterval(this._positionUpdateTimer)};r.prototype.seek=function(e){if(this._html5Audio._playerId!==this._descriptor.id){this._currentPosition=e;this.trigger("positionChange",this._currentPosition,this._loadedPosition,this._duration,this);return}a.prototype.seek.apply(this,arguments)};r.prototype.kill=function(){if(this._state===l.DEAD){return}this._playRequested=false;clearInterval(this._positionUpdateTimer);clearTimeout(this._bufferingTimeout);this.toggleEventListeners(false);this._setState(l.DEAD)};r.prototype.resume=function(){if(this.isInOneOfStates(l.ERROR,l.DEAD)){return}if(this._html5Audio._playerId!==this._descriptor.id){this.play(this._currentPosition);return}a.prototype.resume.apply(this,arguments)};r.prototype.preload=function(){if(!this._preloadAudio&&s.supportSourceSwappingWithPreload()){this._preloadAudio=new Audio;this._preloadAudio.preload="none"}var e=this._preloadAudio;if(e&&e.preload!=="auto"){this._logger.log("preload");e.preload="auto";e._playerId=this._id;e.type=this._descriptor.mimeType;e.src=this._descriptor.src;e.load()}}});n("hlssingleaudioplayer",["require","exports","module","underscore","errors","vendor/events","hlsaudioplayer","logger","singleaudioplayer","states"],function(e,t,n){var r,i=e("underscore"),s=e("errors"),o=e("vendor/events"),u=e("hlsaudioplayer"),a=e("logger"),f=e("singleaudioplayer"),l=e("states");n.exports=r=function(e,t){f.apply(this,arguments)};i.extend(r.prototype,f.prototype);r.prototype.getType=function(){return"HTML5 HLS single audio"}});n("mimetypes",{AAC:"audio/aac",M3U8:"application/x-mpegURL",MP4:"audio/mp4",MPEG:"audio/mpeg",OGG:"audio/ogg",WAV:"audio/wav",WEBM:"audio/webm",getTypeByExtension:function(e){var t={mp1:this.MPEG,mp2:this.MPEG,mp3:this.MPEG,mpeg:this.MPEG,mpg:this.MPEG,aac:this.AAC,mp4:this.MP4,ogg:this.OGG,oga:this.OGG,opus:this.OGG,webm:this.WEBM,wav:this.WAV,m3u8:this.M3U8};return t[e]||null}});n("factory",["require","exports","module","underscore","browserutils","flashaudioproxy","hlsaudioplayer","hlssingleaudioplayer","html5audioplayer","mimetypes","singleaudioplayer","vendor/swfobject"],function(e,t,n){var r,i=e("underscore"),s=e("browserutils"),o=e("flashaudioproxy"),u=e("hlsaudioplayer"),a=e("hlssingleaudioplayer"),f=e("html5audioplayer"),l=e("mimetypes"),c=e("singleaudioplayer"),h=e("vendor/swfobject");n.exports=r=function(){};r.createAudioPlayer=function(e,t){var n,i,h;n=e.src.split(":")[0];if((n==="rtmp"||n==="rtmpt"||e.forceFlash)&&!e.forceHTML5){h=new o(e,t)}else{e.mimeType=r.getMimeType(e);if(e.mimeType===l.M3U8){if(s.isNativeHlsSupported()){if(s.isMobile()||e.forceSingle){h=new a(e,t)}else{h=new u(e,t)}}else{h=new o(e,t)}}else if(s.supportHTML5Audio()&&s.canPlayType(e.mimeType)||e.forceHTML5){if(s.isMobile()||e.forceSingle){h=new c(e,t)}else{h=new f(e,t)}}else{if(e.mimeType===l.MPEG){h=new o(e,t)}else{return null}}}return h};r.getMimeType=function(e){if(e.mimeType){return e.mimeType}var t=e.src.split("?")[0];t=t.substring(t.lastIndexOf(".")+1,t.length);return l.getTypeByExtension(t)}});n("audiomanager",["require","exports","module","underscore","factory","states","errors","browserutils"],function(e,t,n){var r,i=e("underscore"),s=e("factory"),o=e("states"),u=e("errors"),a=e("browserutils");n.exports=r=function(e){e=e||{};this._players={};this._volume=1;this._mute=false;this._settings=i.defaults(e,r.defaults)};r.States=o;r.Errors=u;r.BrowserUtils=a;r.defaults={flashAudioPath:"flashAudio.swf",flashLoadTimeout:2e3,flashObjectID:"flashAudioObject",audioObjectID:"html5AudioObject",updateInterval:300,bufferTime:8e3,bufferingDelay:800,debug:false};r.prototype.getAudioPlayer=function(e){return this._players[e]};r.prototype.hasAudioPlayer=function(e){return this._players[e]!==undefined};r.prototype.removeAudioPlayer=function(e){if(this.hasAudioPlayer(e)){delete this._players[e]}};r.prototype.setVolume=function(e){e=Math.min(1,e);this._volume=Math.max(0,e);for(var t in this._players){if(this._players.hasOwnProperty(t)){this._players[t].setVolume(this._volume)}}};r.prototype.getVolume=function(){return this._volume};r.prototype.setMute=function(e){this._muted=e;for(var t in this._players){if(this._players.hasOwnProperty(t)){this._players[t].setMute(this._muted)}}};r.prototype.getMute=function(){return this._muted};r.prototype.createAudioPlayer=function(e){var t,n,r;if(!e.id){e.id=Math.floor(Math.random()*1e10).toString()+(new Date).getTime().toString()}if(!e.src){throw new Error("AudioManager: You need to pass a valid src")}if(!this._players[e.id]){this._players[e.id]=s.createAudioPlayer(e,this._settings)}this._players[e.id].setVolume(this._volume);this._players[e.id].setMute(this._muted);this._players[e.id].on("stateChange",this._onStateChange,this);return this._players[e.id]};r.prototype._onStateChange=function(e,t){if(t.getState()===o.DEAD){this.removeAudioPlayer(t.getId())}}});t(["audiomanager"]);return t("audiomanager")})
